---
interface Props {
  embedUrl: string;
  title: string;
}

const { embedUrl, title } = Astro.props;
---

<div class="bg-gray-50 rounded-xl p-4">
  <h3 class="font-semibold text-gray-900 mb-2">Embed This Calculator</h3>
  <p class="text-sm text-gray-600 mb-3">
    Copy the code below to embed this calculator on your website.
  </p>

  <div class="relative">
    <pre
      id="embed-code"
      class="bg-gray-900 text-gray-100 text-xs p-3 rounded-lg overflow-x-auto"
    ><code>&lt;iframe
  src="{embedUrl}"
  width="100%"
  height="500"
  frameborder="0"
  title="{title}"
&gt;&lt;/iframe&gt;</code></pre>

    <button
      id="copy-embed-btn"
      class="absolute top-2 right-2 px-3 py-1 bg-brand-600 hover:bg-brand-700 text-white text-xs font-medium rounded transition-colors"
    >
      Copy
    </button>
  </div>
</div>

<script>
  const btn = document.getElementById('copy-embed-btn');
  const code = document.getElementById('embed-code');

  btn?.addEventListener('click', async () => {
    const text = code?.textContent || '';
    try {
      await navigator.clipboard.writeText(text);
      if (btn) {
        btn.textContent = 'Copied!';
        setTimeout(() => {
          btn.textContent = 'Copy';
        }, 2000);
      }
    } catch {
      console.error('Failed to copy');
    }
  });
</script>
